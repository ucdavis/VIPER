===========================================
EFFORT DATA MIGRATION ANALYSIS REPORT
===========================================
Analysis Date: 2025-09-26 16:20:54

EXECUTIVE SUMMARY
-----------------
Total Critical Issues: 606
Total Warning Issues: 0
Migration Risk Level: HIGH - Significant remediation required

MOTHRA ID MAPPING ISSUES
------------------------
tblPerson:
  Total Records: 24367
  Unmapped Records: 7 (0.03%)
  Unique Unmapped IDs: 4
  Complete List of Unmapped person_MothraID values:
    - person_MothraID: 00297319 (1 records)
    - person_MothraID: 00352428 (3 records)
    - person_MothraID: 00476734 (2 records)
    - person_MothraID: 01655578 (1 records)

tblEffort:
  Total Records: 79249
  Unmapped Records: 462 (0.58%)
  Unique Unmapped IDs: 7
  Complete List of Unmapped effort_MothraID values:
    - effort_MothraID: VMDOGues (21 records)
    - effort_MothraID: VETGuest (296 records)
    - effort_MothraID: 01655578 (1 records)
    - effort_MothraID: UNKGuest (139 records)
    - effort_MothraID: 00297319 (1 records)
    - effort_MothraID: 00352428 (3 records)
    - effort_MothraID: #URL.Mot (1 records)

tblPercent:
  Total Records: 14212
  Unmapped Records: 12 (0.08%)
  Unique Unmapped IDs: 3
  Complete List of Unmapped percent_MothraID values:
    - percent_MothraID: 00476734 (6 records)
    - percent_MothraID: 00297319 (3 records)
    - percent_MothraID: 00352428 (3 records)

tblSabbatic:
  Total Records: 0
  Unmapped Records: 0 (0.00%)
  Unique Unmapped IDs: 0

REFERENTIAL INTEGRITY ISSUES
-----------------------------
BUSINESS RULE VIOLATIONS
------------------------
Duplicate Key Violations:
  tblCourses:
    Violations: 4
    Key Values: CRN 83036 Term 201010 Units 15 (2 duplicates); CRN 53040 Term 201103 Units 15 (2 duplicates)

Required Field Violations (NULL/empty values):
  tblPerson.person_EffortDept:
    NULL/Empty Records: 109

  tblCourses.course_CRN:
    NULL/Empty Records: 11

Check Constraint Violations:
  tblEffort - effort_Hours between 0 and 9999:
    Violations: 1
    Violating Records:
      - effort_ID: 87673, MothraID: VMBGuest, TermCode: 200710, CRN: 70092, Hours: -2, Weeks: NULL, Role: 2, ClientID: NULL, SessionType: LEC, CourseID: 35865

Planned Unique Constraint Violations:
  tblCourses - Unique constraint will fail:
    Duplicate keys: CRN 83036 Term 201010 Units 15 (2 duplicates); CRN 53040 Term 201103 Units 15 (2 duplicates)
    Total violations: 4

UNMAPPED PERSON DETAILS
-----------------------
Complete analysis of all unmapped MothraIds:
(Use this information to decide whether to create new Person records or map to existing ones)

A) UNMAPPED IDs WITH PERSON DETAILS (exist in tblPerson, missing from VIPER):
   → Consider creating Person records in VIPER or mapping to existing PersonIds

MothraID: 00476734
  Name: GRACE  BRANSFORD
  Title:
  Department: OTH
  Job Group: V0V
  Admin Unit:
  Report Unit:
  % Admin: 0.0%
  Terms Active: 200403, 200503
  ❌ NO VIPER MATCHES: No person with this name found in VIPER
  💡 RECOMMENDATION: Create new Person record in VIPER

MothraID: 00297319
  Name: IAIN A GRANT
  Title:
  Department: OTH
  Job Group: 446
  Admin Unit:
  Report Unit:
  % Admin: 0.0%
  Terms Active: 200510
  ❌ NO VIPER MATCHES: No person with this name found in VIPER
  💡 RECOMMENDATION: Create new Person record in VIPER

MothraID: 00352428
  Name: REGINA M SCHROEDER
  Title:
  Department: VSR
  Job Group: B25
  Admin Unit:
  Report Unit:
  % Admin: 0.0%
  Terms Active: 200510, 200601, 200603
  ❌ NO VIPER MATCHES: No person with this name found in VIPER
  💡 RECOMMENDATION: Create new Person record in VIPER

MothraID: 01655578
  Name: KARINA M SNAPP
  Title:
  Department: VMDOCS
  Job Group: I10
  Admin Unit:
  Report Unit: VMDOCS
  % Admin: 0.0%
  Terms Active: 202009
  🔍 POTENTIAL VIPER MATCHES FOUND:
    • Exact Name Match: Karina Snapp
      PersonId: 10726, MothraId: 00421817
      Department: , Status: Active
  💡 RECOMMENDATION: Consider mapping to existing PersonId instead of creating new record

B) UNMAPPED IDs WITHOUT PERSON DETAILS (exist in effort/percent tables only):
   → These appear to be guest/temporary accounts or data entry errors

MothraID: #URL.Mot
  Found in: tblEffort: 1 records
  Status: No person record exists - likely guest/temporary account

MothraID: UNKGuest
  Found in: tblEffort: 139 records
  Status: No person record exists - likely guest/temporary account

MothraID: VETGuest
  Found in: tblEffort: 296 records
  Status: No person record exists - likely guest/temporary account

MothraID: VMDOGues
  Found in: tblEffort: 21 records
  Status: No person record exists - likely guest/temporary account

BLANK CRN COURSES ANALYSIS
-------------------------
Total courses with blank CRN: 11
Courses used in effort reports (MUST migrate): 10
Courses not used in effort reports (can skip): 1

COURSES WITH BLANK CRN THAT MUST BE MIGRATED:
(These courses are referenced in effort records and need special handling)

CourseId: 43859
  Term: 201201
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 129
  Effort Records: 5
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 44259
  Term: 201203
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 129
  Effort Records: 3
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 44431
  Term: 201208
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 134
  Effort Records: 1
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 45626
  Term: 201308
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 141
  Effort Records: 2
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 46243
  Term: 201401
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 140
  Effort Records: 6
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 46604
  Term: 201403
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 138
  Effort Records: 3
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 47084
  Term: 201409
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 134
  Effort Records: 2
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 47817
  Term: 201502
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 136
  Effort Records: 2
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 47909
  Term: 201504
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 149
  Effort Records: 1
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

CourseId: 48975
  Term: 201602
  Subject: DVM
  Course Number:
  Sequence: 1
  Units: 15
  Department: VMD
  Enrollment: 149
  Effort Records: 4
  → MIGRATION REQUIRED: Assign placeholder CRN or make CRN nullable

COURSES WITH BLANK CRN THAT CAN BE SKIPPED:
(These courses have no effort records associated with them)

CourseId: 44776, Term: 201210, Subject: DVM      , Units: 15, Dept: VMD



=======================
Suggested Remeditation
=======================
Busines Rules:
	tblCourses - Key Values: CRN 83036 Term 201010 Units 15 (2 duplicates); CRN 53040 Term 201103 Units 15 (2 duplicates)
		=> Update records to keep one course
	tblPerson effortDept null/empty
		=> Look up most recent effort dept for person and update
		Procedure TBD
		We should fix the import process so this doesn't happen if possible
	course_CRN
		=> create a CRN starting with 9

tblEffort - effort hours < 0
	=> Delete this record

Unmapped Person:
	=> DELETE
		MothraID: #URL.Mot
		MothraID: 00476734
			Name: GRACE  BRANSFORD
			
	=> ADD PERSON
		For these, we can add a fake user with mothraID VETGUEST and update records to point to VETGUEST
		MothraID: UNKGuest
		MothraID: VETGuest
		MothraID: VMDOGues

	=> ADD PERSON (if possible, probably not a lot of harm deleting these records)
		MothraID: 00297319
		  Name: IAIN A GRANT  
		MothraID: 00352428
		  Name: REGINA M SCHROEDER

	=> UPDATE
		Switch Karina's records to point to her other MothraId / PersonId
		MothraID: 01655578
		  Name: KARINA M SNAPP
	  
	  
Blank CRNs
	=> Create a CRN starting with 9, or remove course if no effort attached
